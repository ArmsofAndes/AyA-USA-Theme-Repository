{% schema %}
{
  "name": "Videos con texto (4+1)",
  "settings": [
    {
  "type": "checkbox",
  "id": "use_global_font",
  "label": "Usar tipografía global del theme",
  "default": false
}
,{
  "type": "select",
  "id": "font_family",
  "label": "Tipografía",
  "default": "montserrat",
  "options": [
    { "value": "helvetica", "label": "Helvetica Neue" },
    { "value": "arimo", "label": "Arimo" },
    { "value": "roboto", "label": "Roboto" },
    { "value": "poppins", "label": "Poppins Light" },
    { "value": "source-sans", "label": "Source Sans" },
    { "value": "montserrat", "label": "Montserrat" }
  ]
},

   {
      "type": "text",
      "id": "text_title_1",
      "label": "Título 1",
      "default": "Título 1"
    },
    {
      "type": "color",
      "id": "title_color_1",
      "label": "Color del título 1",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "title_weight_1",
      "label": "Peso del título 1",
      "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "bold", "label": "Negrita" },
        { "value": "lighter", "label": "Ligero" }
      ],
      "default": "bold"
    },
    {
      "type": "range",
      "id": "title_size_1",
      "label": "Tamaño del título 1",
      "min": 12,
      "max": 64,
      "default": 20,
      "unit": "px"
    },

    {
      "type": "text",
      "id": "text_title_2",
      "label": "Título 2",
      "default": "Título 2"
    },
    {
      "type": "color",
      "id": "title_color_2",
      "label": "Color del título 2",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "title_weight_2",
      "label": "Peso del título 2",
      "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "bold", "label": "Negrita" },
        { "value": "lighter", "label": "Ligero" }
      ],
      "default": "bold"
    },
    {
      "type": "range",
      "id": "title_size_2",
      "label": "Tamaño del título 2",
      "min": 12,
      "max": 64,
      "default": 18,
      "unit": "px"
    },

    {
      "type": "text",
      "id": "text_title_3",
      "label": "Título 3",
      "default": "Título 3"
    },
    {
      "type": "color",
      "id": "title_color_3",
      "label": "Color del título 3",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "title_weight_3",
      "label": "Peso del título 3",
      "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "bold", "label": "Negrita" },
        { "value": "lighter", "label": "Ligero" }
      ],
      "default": "bold"
    },
    {
      "type": "range",
      "id": "title_size_3",
      "label": "Tamaño del título 3",
      "min": 12,
      "max": 64,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Color del texto",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "text_weight",
      "label": "Peso del texto",
      "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "bold", "label": "Negrita" },
        { "value": "lighter", "label": "Ligero" }
      ],
      "default": "normal"
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Tamaño del texto",
      "min": 12,
      "max": 48,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "richtext",
      "id": "richtext_content",
      "label": "Texto de la columna 5",
      "default": "<p>Aquí va tu texto.</p>"
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "url",
          "id": "video_url",
          "label": "URL de YouTube"
        },
        {
          "type": "video",
          "id": "video_file",
          "label": "Video hosted subido a Shopify"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Videos con texto (4+1)",
      "category": "Custom"
    }
  ]
}
{% endschema %}
<section class="videos-with-text ">
  <div class="videos-with-text__grid">

    <!-- Texto -->
    <div class="videos-with-text__text">
      {%- if section.settings.use_global_font -%}
  {% assign section_font = settings.font_body | default: 'inherit' %}
{%- else -%}
  {% assign section_font = section.settings.font_family | default: settings.font_body | default: 'inherit' %}
{%- endif -%}

<!-- Títulos -->
{% if section.settings.text_title_1 != blank %}
<h3 class="videos-with-text__title" style="color: {{ section.settings.title_color_1 }};
   font-weight: {{ section.settings.title_weight_1 }};
   font-size: {{ section.settings.title_size_1 }}px;
   font-family: {{ section_font }};">
  {{ section.settings.text_title_1 }}
</h3>
{% endif %}

{% if section.settings.text_title_2 != blank %}
<h3 class="videos-with-text__title" style="color: {{ section.settings.title_color_2 }};
   font-weight: {{ section.settings.title_weight_2 }};
   font-size: {{ section.settings.title_size_2 }}px;
   font-family: {{ section_font }};">
  {{ section.settings.text_title_2 }}
</h3>
{% endif %}

{% if section.settings.text_title_3 != blank %}
<h3 class="videos-with-text__title" style="color: {{ section.settings.title_color_3 }};
   font-weight: {{ section.settings.title_weight_3 }};
   font-size: {{ section.settings.title_size_3 }}px;
   font-family: {{ section_font }};">
  {{ section.settings.text_title_3 }}
</h3>
{% endif %}
      
      <!-- Texto -->
<div class="videos-with-text__content" style="color: {{ section.settings.text_color }};
 font-weight: {{ section.settings.text_weight }};
 font-size: {{ section.settings.text_size }}px;
 font-family: {{ section_font }};">
  {{ section.settings.richtext_content }}
</div>
    </div>

    <!-- Videos -->
    <div class="videos-with-text__videos">
      {% for block in section.blocks %}
        <div class="videos-with-text__video">
          {% if block.type == 'video' and block.settings.video_url != blank %}
            {% assign video_id = block.settings.video_url | split: 'v=' | last %}
            <iframe 
              src="{{ block.settings.video_url | replace: 'watch?v=', 'embed/' }}?autoplay=1&mute=1&loop=1&playlist={{ video_id }}&playsinline=1&controls=0&showinfo=0&modestbranding=1&rel=0"
              frameborder="0"
              allow="autoplay; fullscreen"
              allowfullscreen>
            </iframe>
          {% elsif block.settings.video_file != blank %}
            {{ block.settings.video_file | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false }}
          {% endif %}
        </div>
      {% endfor %}
    </div>

  </div>
</section>

<style>
  .font-helvetica {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.font-arimo {
  font-family: 'Arimo', sans-serif;
}
.font-roboto {
  font-family: 'Roboto', sans-serif;
}
.font-poppins {
  font-family: 'Poppins', sans-serif;
  font-weight: 300;
}
.font-source-sans {
  font-family: 'Source Sans Pro', sans-serif;
}
.font-montserrat {
  font-family: 'Montserrat', sans-serif;
}

.videos-with-text {
  margin: 5% 0;
}

.videos-with-text,
.videos-with-text * {
  font-family: inherit; 
}

/* Desktop: 5 columnas (4 videos + texto) */
.videos-with-text__grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 3px;
  align-items: stretch;
}

.videos-with-text__videos {
  display: contents; /* mantiene los videos en las 4 columnas del grid en desktop */
}

.videos-with-text__video iframe,
.videos-with-text__video video {
  width: 100%;
  height: 100%;
  object-fit: cover; 
}

.videos-with-text__text {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  text-align: center;
  padding: 0px 20px 20px 20px;
  margin-left: 20px;
}

.videos-with-text__title {
  margin-bottom: 10px;
}
@media (min-width: 769px) {
  .videos-with-text__text {
    grid-column: 5; 
    grid-row: 1;    
  }
}
/* Mobile: texto arriba + videos en 2x2 */
@media (max-width: 768px) {
  .videos-with-text__grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .videos-with-text__text {
    order: -1; /* sube el texto arriba */
    margin-left: 0;
    padding: 10px;
  }

  .videos-with-text__videos {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 por fila */
    column-gap: 1px; /* espacio entre columnas */
    row-gap: 1px; 
  }

  .videos-with-text__video iframe,
  .videos-with-text__video video {
    width: 100%;
    height: auto;display: block;
    aspect-ratio: 16/9; /* mantiene proporción */
  }
}
</style>
