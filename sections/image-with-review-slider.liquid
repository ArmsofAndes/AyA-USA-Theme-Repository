<section class="image-review-section" style="display: flex; flex-wrap: wrap; align-items: center; gap: 2rem; padding: 2rem;">
  
  <!-- REVIEW PRIMERO (izquierda) -->
  <div class="review-slider-side" style="flex: 1; min-width: 300px; overflow: hidden; position: relative;">
    <div class="slider-container" style="display: flex; transition: transform 0.5s ease;">
      {% for block in section.blocks %}
        <div class="slide" style="min-width: 100%; box-sizing: border-box; padding: 1rem;">
          <div class="stars" style="color: #465b70ff; font-size: 20px; margin-bottom: 0.5rem;">
            ★★★★★
          </div>
          <strong style="font-size: 25px;color: #465b70ff; line-height: 1.6;">{{ block.settings.review_text }}</strong>
          <p style="font-size: 15px;color: #465b70ff; display: block; margin-top: 0.5rem;">– {{ block.settings.reviewer_name }}</p>
         {% if block.settings.extra_text != blank %}
          <p class="extra-review-text" style="margin-top: 2rem; font-size: 15px; line-height: 1.6; color: #465b70ff;">
            {{ block.settings.extra_text }}
          </p>
        {% endif %}
        </div>
      {% endfor %}
    </div>

    <div class="dots" style="text-align: center; margin-top: 1rem;">
      {% for block in section.blocks %}
        <span class="dot" style="display: inline-block; width: 20px; height: 4px; margin: 0 4px; background: #ccc; border-radius: 2px; cursor: pointer;"></span>
      {% endfor %}
    </div>
  </div>

  <!-- IMAGEN DESPUÉS (derecha) -->
  <div class="image-side" style="flex: 1; min-width: 300px;">
    <img src="{{ section.settings.image | image_url: width: 600 }}" loading="lazy" alt="Imagen lateral" style="width: 100%; height: auto; border-radius: 12px;" />
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const slider = document.querySelector('.slider-container');
      const dots = document.querySelectorAll('.dot');
      const slides = document.querySelectorAll('.slide');
      let currentIndex = 0;
      const totalSlides = slides.length;

      function goToSlide(index) {
        slider.style.transform = `translateX(-${index * 100}%)`;
        dots.forEach(dot => dot.style.background = '#ccc');
        dots[index].style.background = '#000';
        currentIndex = index;
      }

      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          goToSlide(index);
        });
      });

      // Auto-slide
      setInterval(() => {
        const nextIndex = (currentIndex + 1) % totalSlides;
        goToSlide(nextIndex);
      }, 5000); // cada 5 segundos
    });
  </script>
</section>

{% schema %}
{
  "name": "Slider con imagen",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Imagen lateral"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Reseña",
      "settings": [
        {
          "type": "text",
          "id": "review_text",
          "label": "Texto de reseña"
        },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reseña completa"
        },
        {
  "type": "text",
  "id": "extra_text",
  "label": "Texto adicional:",
}
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Slider con imagen",
      "category": "Custom"
    }
  ]
}
{% endschema %}

